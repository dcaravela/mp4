---
title: "Mini-Project #4: Database Querying"
author: "Dianne Caravela, Neyda Carrillo, Fay Adan"
date: "5/2/2019"
output: 
  html_document:
    code_folding: hide
---

```{r setup, include=FALSE}
library(tidyverse)
library(RMySQL)
db <- dbConnect(MySQL(), 
                host = "scidb.smith.edu", 
                user = "mth292", 
                password = "RememberPi", 
                dbname = "imdb")
knitr::opts_chunk$set(connection = db, max.print = 20)
```


```{sql connection=db}
SELECT t.id, t.title, t.production_year, mi.info AS gross, mi2.info AS budget, 
mii.info AS votes, mii2.info AS rating
FROM title t
JOIN movie_info mi ON t.id = mi.movie_id
JOIN movie_info mi2 ON t.id = mi2.movie_id
JOIN movie_info_idx mii ON mii.movie_id = t.id
JOIN movie_info_idx mii2 ON mii2.movie_id = t.id
WHERE mi.info_type_id = 107
  AND mi2.info_type_id = 105
  AND mii.info_type_id = 100
  AND mii2.info_type_id = 101
  AND mii.info > 100000
  AND mi.info LIKE '%USA%'
ORDER BY mii2.info desc;

```





